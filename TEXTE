https://epsagon.com/development/aws-lambda-programming-language-comparison/

Réalisation Technique

Nous avons vu dans la partie précédente, la chaîne de production qui doit être réalisé. Pour la concrétiser, une multitude d'options s'offre à nous. Une des tâches de se stage à été de faire des choix, parmis tous les outils, et toute les méthodes possible celles qui serait la plus adéquats. Pour cela, il es important de bien avoir en tête ce que on désir.

Livrables :

Une solution de pipeline devra rescpeer les points suivants : 

     - Doit être parametrables, et ces paramètres doivent être accésibles sans avoir à modifier le code. 
     - Doit être sécurisé, les informations sensible (clef d'accès ect) ne doivent pas être accésible.
     - Doit être peu coûteuse.
     - Ne doit pas nécessiter d'intervention humaines, on cherche à construire une chaîne d'automatisaion, elle doit s'adater à tous les cas de figure possible
     
Dans l'idéal, on pourra également ajouter les livrables suivante : 

     - Le suivit du bon déroulement de la Pipeline doit être facilement lisible
     - Doit être facilement modifiable si lon veux adapter la solution pour d'autre type de produit
     
Présentation des différentes solutions : 

Dans cette section vont être présenter les différentes solutions qui ont été envisagé. Certaine de ces solutions ne concerne qu'un bout de la chaine, et sont parfois combinable.

PROPOSITION #1 : JENKINS

Jenkins est un outils de création de pipeline

PROPOSITION #2 : UTILISER LES OUTILS DE CREATION DE PIPELINE DE AWS

PROPOSITIONS #3 : OUTILS AWS 

Les propositions qui vont suivre permet contourner les outils de pipeline de AWS. Elle demande plus d'effort de programmation, mais on les préfrera pour leurs côut plus faible.
Tous ces outils sont tous de même des outils d'Amazone 

PROPOSITION #3 uno : STEP FUNCTION

AWS Step funcins est un services web qui permet de coordiner les différent composant d'une chaîne d'opération ("Qu'on appelle généralement workflow ou flux d'opéraions"). Cette outils permet de séparé simplement chaque opérations et de pouvoir visualiser et suivre se flux de manière graphique (cf figure). 
Le language pour programmer cete chîne est le "Amazon States Language", baser sur le JSON. Il permet d'executer toutes les opérations sur les services d'aws réalisable sur la console aws, ou par les sdk d'amazones. Ce services permet de facilité a transition entre les états mais ne réalise aucune execution. En revanche, il permet de manager des envionnement d'execution aws qui pourrons effectué du code, comme les lambdas.

Les avantage de cette outils t ça facilié de comprehenion t son suivit graphique qui le rend trs simple à débuger lorsqu'il  a des erreurs. Amazone facture ce services par le nombre de transition effectué à 0,025 USD, soit 0,022 Euro pour 1 000 transitions d'état. Ajouter à cela, le prix d'execution des Lambdas.

PROPOSITION #3 bis : CLOUD FORMATION

AWS Step funcins est un services web qui permet de coordiner les différent composant d'une chaîne d'opération ("Qu'on appelle généralement workflow ou flux d'opéraions"). Cette outils permet de séparé simplement chaque opérations et de pouvoir visualiser et suivre se flux de manière graphique (cf figure). 
Le language pour programmer cete chîne est le "Amazon States Language", baser sur le JSON. Il permet d'executer toutes les opérations sur les services d'aws réalisable sur la console aws, ou par les sdk d'amazones. Ce services permet de facilité a transition entre les états mais ne réalise aucune execution. En revanche, il permet de manager des envionnement d'execution aws qui pourrons effectué du code, comme les lambdas.

PROPOSITION #3 ters : Lambda et sdk

Il est possible de faire executer la pipeline uniquement par les lambdas. AWS fournis des sdk (libairie) qui contient des fonctions permetant d'effecuer toutes les opérations sur tous les services proposer par Amazone. Parmis les language de progamation disponible, le python à été choisi pour se prptotype, avec la librai developper par Amazone, Boto3.

Deux lambda on été utiliser pour cette pipeline de deploment. (cf. fig) La première Lambda va êter charger de récupéré le fichier 


Limitation de la solution définitivie.

OPIMISAIN DES PERFORMANCES : 

La chaîne présenter à la partie précédente démarre en série (de manière syncrone) une d'autres Lambdas effecuant la fonction "Depoyer". La fonction principal de la pipeline "ServerlessPipeline" va attendre qu'un deployer s'achève, soit qu'il récpère à réponse, pour démaré le deployer suivant. Hors, aws facture l'utilisation de la lambda selon sont temps d'utilisation. Il semble alors judicieux de réflechir à comment minimiser les temps d'attente. Pour évalué les performance de cette méthode d'organisation de l'execution des lambda, nous allons observé le temps moyens d'execution de la lambda en fonction du nombre de région dans laquelle on va la déployer. On cherchera à réduire au maximum cette durée afin de rendre notre solution plus economique.

Perormance lorsque les Deployer sont invoké de manière syncrone : 

- Durée de ServerlessPipeline seule (deployment seulement sur la régions par défault) :  ~7s

- Durée du Deployer seule (temps de déploiment pour 1 régions) :  ~14s

- Durée Théorique de Serverless Pipeline en fonction du nombre de régions : 7 + 14 * nb_regions

Vérification du modèle : Durée empirique de serverlessPipeline pour 2 région en plus de celle par default :  ~36s / 7 + 14*2 = 35s

Notre modèle n'est pas parfaitement exacte mais il sera satisfesant pour notre approximation. 

Soit est facturé durée de serverlessPipeline 35s (en comptant le temps d'attente) + durée des Deployer 14*2 = 28s  ==> durée facturé :  1min 3s

SOLUTION : 

La première solution qui seble vidante pour résoudre se problème est de lancer les lambda "Deployer" de manière asyncrone (Soi en parralle) comme des Thread.


Perormance lorsque les Deployer sont invoké à partir d'un incrementeur : 

- Durée de ServerlessPipeline seule (deployment seulement sur la régions par défault) :  ~7s

- Durée du Deployer seule (temps de déploiment pour 1 régions) :  ~14s

- Durée Théorique de Serverless Pipeline en fonction du nombre de régions : 7 + 14 * nb_regions

Vérification du modèle : Durée empirique de serverlessPipeline pour 2 région en plus de celle par default :  ~36s / 7 + 14*2 = 35s

Notre modèle n'est pas parfaitement exacte mais il sera satisfesant pour notre approximation. 

Soit est facturé durée de serverlessPipeline 35s (en comptant le temps d'attente) + durée des Deployer 14*2 = 28s  ==> durée facturé :  1min 3s

DEINITION COLD START
When we invoke the Lambda for the first time, it downloads the code from S3, downloads all the dependencies, creates a container, and starts the application before it executes the code. This whole duration (except the execution of code) is known as the cold start time.

